# Домашнее задание 2
 - Для  запуска **Terraform**  необходимо в файле **variables.auto.tfvars** прописать свои данные.
 - В файл **id_rsa.pub** прописать свой публичный ключ. 
 - Запустить **Terraform init**
 - Запустить **Terraform apply**
 - После создания сервера, будут выведены его внешний **IP адреса** серверов
	 - приватный **IP базы данных**
	 - приватные **IP серверов с приложением**
	 - публичный **IP балансировщика**
	 - публичный **IP бастиона**
 
 В файле **inventory** необходимо прописать **IP адреса** того, что получили. 
 Обязательно прописать переменную **DB_HOST** - указать  **IP адрес БД** 
 
 - Запустить  **ansible all -m ping** для проверки связи.  Должно вернуться **pong**
 - Запустить **ansible-playbook  -i inventory  start.yml** для разворачивания кластера.
 
 **Внимание!** 
 Для доступа к серверам **базы данных** и **серверов с приложением** используется отдельный сервер **бастион**.  Ему и серверу **балансировщика** меняется порт ssh при запуске.
 
**Внимание!** 
При установке кластера для серверов  **базы данных** и **серверов с приложением** устанавливаются внешние **IP адреса**. Это надо для того, чтобы у них была возможность выйти в интернет и сделать обновления пакетов, установить docker, и скачать docker образ с приложением. 
Как в Yandex Cloud сделать так, чтобы сервер мог выходить в интернет, но у него не было внешнего IP я решил время не тратить. 
После полной установки кластера нужно убрать для этих серверов внешние **IP адреса**. Для этого надо в файле **instance.tf** для **"yandex_compute_instance" "business"** и для **"yandex_compute_instance" "db"** убрать  **nat = true**. И снова запустить **Terraform apply**






```